# –†–µ–∑—é–º–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≥–ª—É–±–æ–∫–∏—Ö —Å—Å—ã–ª–æ–∫ –¥–ª—è Android –∏ iOS

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Android
- **AndroidManifest.xml**: –î–æ–±–∞–≤–ª–µ–Ω intent-filter –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å—Å—ã–ª–æ–∫ `https://bps-energy.by/qr/start-session/*`
- **MainActivity.kt**: –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `onNewIntent` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≥–ª—É–±–æ–∫–∏—Ö —Å—Å—ã–ª–æ–∫ –ø—Ä–∏ –∑–∞–ø—É—â–µ–Ω–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ iOS
- **AppDelegate.mm**: –î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ Universal Links (`openURL`, `continueUserActivity`)
- **Info.plist**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Associated Domains –¥–ª—è –¥–æ–º–µ–Ω–∞ `bps-energy.by`
- **apple-app-site-association**: –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –Ω–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–µ

### 3. –°–µ—Ä–≤–∏—Å –≥–ª—É–±–æ–∫–∏—Ö —Å—Å—ã–ª–æ–∫
- **src/service/deepLinking.ts**: –°–æ–∑–¥–∞–Ω –∫–ª–∞—Å—Å `DeepLinkingService` —Å –º–µ—Ç–æ–¥–∞–º–∏:
  - `parseDeepLink()` - –ø–∞—Ä—Å–∏–Ω–≥ URL –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ ID —Å–µ—Å—Å–∏–∏
  - `handleDeepLink()` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Å—ã–ª–∫–∏ –∏ –≤—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å
  - `addListener()` - —Å–∏—Å—Ç–µ–º–∞ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ —Å–æ–±—ã—Ç–∏—è
  - `init()` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å—Å—ã–ª–æ–∫ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

### 4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–∞–º–µ—Ä–æ–π
- **src/providers/camera.tsx**: –û–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ QR-–∫–æ–¥–æ–≤ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ñ–æ—Ä–º–∞—Ç—É –≥–ª—É–±–æ–∫–∏—Ö —Å—Å—ã–ª–æ–∫
- **src/screens/ChargingSessionScreen.tsx**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è –≥–ª—É–±–æ–∫–∏—Ö —Å—Å—ã–ª–æ–∫

### 5. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
- **src/App.tsx**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞ –≥–ª—É–±–æ–∫–∏—Ö —Å—Å—ã–ª–æ–∫ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## üéØ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Å—ã–ª–æ–∫
- –§–æ—Ä–º–∞—Ç: `https://bps-energy.by/qr/start-session/{id}`
- –í—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å: `—Å–µ—Å—Å–∏—è {id} –Ω–∞—á–∞–ª–∞—Å—å`
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö ID (–ª—é–±—ã–µ —á–∏—Å–ª–∞/—Å—Ç—Ä–æ–∫–∏)

### –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
1. **–í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ö–∞–º–µ—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ‚Üí QR-–∫–æ–¥ ‚Üí –æ–±—Ä–∞–±–æ—Ç–∫–∞
2. **–í–Ω–µ—à–Ω–µ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**: –í–Ω–µ—à–Ω–∏–π —Å–∫–∞–Ω–µ—Ä ‚Üí –≤—ã–±–æ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ‚Üí –æ–±—Ä–∞–±–æ—Ç–∫–∞
3. **–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞**: –ë—Ä–∞—É–∑–µ—Ä ‚Üí –≤—ã–±–æ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ‚Üí –æ–±—Ä–∞–±–æ—Ç–∫–∞
4. **Universal Links (iOS)**: Safari ‚Üí –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Üí –æ–±—Ä–∞–±–æ—Ç–∫–∞

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

```
src/
‚îú‚îÄ‚îÄ service/deepLinking.ts          # –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å
‚îú‚îÄ‚îÄ utils/deepLinkTest.ts           # –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

ios/
‚îú‚îÄ‚îÄ bpsenergy/AppDelegate.mm        # –û–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è Universal Links
‚îú‚îÄ‚îÄ bpsenergy/Info.plist            # –î–æ–±–∞–≤–ª–µ–Ω—ã Associated Domains

android/app/src/main/
‚îú‚îÄ‚îÄ AndroidManifest.xml             # –î–æ–±–∞–≤–ª–µ–Ω intent-filter
‚îî‚îÄ‚îÄ java/com/bpsenergy/MainActivity.kt # –î–æ–±–∞–≤–ª–µ–Ω onNewIntent

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —Ç–µ—Å—Ç—ã:
‚îú‚îÄ‚îÄ DEEP_LINK_TESTING.md           # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
‚îú‚îÄ‚îÄ ios-universal-links-setup.md   # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Universal Links
‚îú‚îÄ‚îÄ test-qr.html                   # HTML —Å QR-–∫–æ–¥–∞–º–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ ios-test-links.html            # –¢–µ—Å—Ç Universal Links –¥–ª—è iOS
‚îú‚îÄ‚îÄ apple-app-site-association     # –§–∞–π–ª –¥–ª—è –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞
‚îî‚îÄ‚îÄ IMPLEMENTATION_SUMMARY.md      # –≠—Ç–æ —Ä–µ–∑—é–º–µ
```

## üîß –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

```
android/app/src/main/
‚îú‚îÄ‚îÄ AndroidManifest.xml            # –î–æ–±–∞–≤–ª–µ–Ω intent-filter
‚îî‚îÄ‚îÄ java/com/bpsenergy/MainActivity.kt # –î–æ–±–∞–≤–ª–µ–Ω onNewIntent

src/
‚îú‚îÄ‚îÄ App.tsx                        # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞
‚îú‚îÄ‚îÄ providers/camera.tsx           # –û–±—Ä–∞–±–æ—Ç–∫–∞ QR-–∫–æ–¥–æ–≤
‚îî‚îÄ‚îÄ screens/ChargingSessionScreen.tsx # –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ë—ã—Å—Ç—Ä–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### Android
1. –û—Ç–∫—Ä–æ–π—Ç–µ `test-qr.html` –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –û—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ –ª—é–±–æ–π QR-–∫–æ–¥ –∫–∞–º–µ—Ä–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è "—Å–µ—Å—Å–∏—è {id} –Ω–∞—á–∞–ª–∞—Å—å"

#### iOS
1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Universal Links (—Å–º. `ios-universal-links-setup.md`)
2. –û—Ç–∫—Ä–æ–π—Ç–µ `ios-test-links.html` –≤ Safari –Ω–∞ iOS —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
3. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –ª—é–±—É—é —Å—Å—ã–ª–∫—É
4. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è "—Å–µ—Å—Å–∏—è {id} –Ω–∞—á–∞–ª–∞—Å—å"

### –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Å—ã–ª–∫–∏
- ‚úÖ `https://bps-energy.by/qr/start-session/8`
- ‚úÖ `https://bps-energy.by/qr/start-session/123`
- ‚ùå `https://example.com/qr/start-session/8` (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –¥–æ–º–µ–Ω)

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞. –°–∏—Å—Ç–µ–º–∞:
- ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç QR-–∫–æ–¥—ã —Å –≥–ª—É–±–æ–∫–∏–º–∏ —Å—Å—ã–ª–∫–∞–º–∏
- ‚úÖ –í—ã–≤–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –∫–æ–Ω—Å–æ–ª—å
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –∏ –≤–Ω–µ—à–Ω–µ–π –∫–∞–º–µ—Ä–æ–π
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ ID —Å–µ—Å—Å–∏–π
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Android –∏ iOS
- ‚úÖ –ò–º–µ–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –∏ —Ç–µ—Å—Ç–æ–≤—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
